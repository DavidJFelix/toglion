openapi: 3.0.0
info:
  title: toglion
  version: 'RFC'
tags:
  - name: bulk-organization
    description: |
      Bulk operations for organization management.
      These can be useful for making multiple changes all in one API call.
  - name: organizations
    description: |
      Organizations are an application grouping that segregates tenant resource and allows users to have multiple projects or employers in their own isolated area.
      Organizations each have their own billing profile, limits, permissions and resources.
      All flags must be owned by an organization.
  - name: organizations-api-keys
    description: |
      API keys owned by an organization which allow them to perform organization automation.
  - name: '405-error'
    description: |
      <SchemaDefinition schemaRef="#/components/responses/401" showReadOnly={true} showWriteOnly={true} />
  - name: '429-error'
    description: |
      <SchemaDefinition schemaRef="#/components/responses/401" showReadOnly={true} showWriteOnly={true} />
x-tagGroups:
  - name: Auth
    tags:
      - api-keys
  - name: Audit Logs
    tags:
      - audit-logs
  - name: Organizations
    tags:
      - organizations
      - organizations-api-keys
      - organizations-audit-logs
      - organizations-flags
      - organizations-groups
      - organizations-members
      - organizations-tags
  - name: Flags
    tags:
      - flags
  - name: Users
    tags:
      - users
  - name: Tags
    tags:
      - tags
  - name: Query
    tags:
      - query
  - name: Payment Plans
    tags:
      - payment-plans
  - name: Errors
    tags:
      - '405-error'
      - '429-error'

paths:
  # '/admin/audit-logs':
    # delete:
    # post:
    # put:
  # '/admin/audit-logs/{auditLogId}':
    # delete:
    # patch:
    # put:
  # '/admin/auth/assume-role':
    # post:
  # '/admin/organizations':
    # delete:
    # post:
    # put:
  # '/admin/organizations/{organizationId}/api-keys':
    # delete:
    # put:
  # '/admin/organizations/{organizationId}/flags':
    # delete:
    # put:
  # '/admin/organizations/{organizationId}/groups':
    # delete:
    # put:
  # '/admin/organizations/{organizationId}/members':
    # delete:
    # put:
  # '/admin/organizations/{organizationId}/payments':
    # delete:
    # put:
  # '/admin/organizations/{organizationId}/payments/{paymentId}':
    # delete:
  # '/admin/organizations/{organizationId}/tags':
    # delete:
    # put:
  # '/admin/payment-plans':
    # delete:
    # post:
    # put:
  # '/admin/payment-plan/{paymentPlanId}':
    # delete:
    # patch:
    # put:
  # '/admin/users':
    # delete:
    # put:
  # '/admin/users/{userId}/api-keys':
    # put:
  '/audit-logs':
    get:
      description: |
        List all `AuditLog` entries that the logged in `User` has access to.
        This endpoint is paginated and shows entries for all `Organizations` with which the logged in `User` has `AuditLog` `Permissions` to `read`.
      summary: 'List Audit Log entries'
      parameters:
        - '$ref': '#/components/parameters/paginationCursor'
        - '$ref': '#/components/parameters/paginationDirection'
        - '$ref': '#/components/parameters/paginationLimit'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/AuditLogEntriesList'
          description: |
            # Success
            A list of visible audit log entries, by default sorted most to least recent
        '400':
          '$ref': '#/components/responses/400'
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - 'authenticated'
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/auditLogs:read'
          # FIXME: list out permissions for individual resource read rights
      tags:
        - audit-logs
  '/audit-logs/{auditLogId}':
    parameters:
      - '$ref': '#/components/parameters/auditLogId'
    get:
      description: |
        Get an `AuditLog` entry by its identifier to allow for deep linking to audit log entries.
      summary: 'Get Audit Log entry by ID'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/AuditLogEntry'
          description: |
            # Success
            An Audit Log Entry
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - 'authenticated'
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/auditLogs:read'
          # FIXME: list out permissions for individual resource read rights
      tags:
        - audit-logs
  # '/auth/github-login'
  # '/auth/google-login'
  '/bulk/organizations/{organizationId}/api-keys':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    post:
      description: |
        Perform a bulk operation on multiple `APIKeys` at one time.
        All operations will fail if any individual operation fails.
        The logged in `User` must have `Permission` to `create`, `update`, and/or `delete` `APIKeys` to perform the corresponding operation through a bulk operation.
      summary: 'Bulk Update APIKeys for an Organization'
      requestBody:
        '$ref': '#/components/requestBodies/BulkOrganizationApiKeysRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/BulkOrganizationApiKeysResponse'
          description: |
            # Success
            An Bulk Response for Organization API Keys
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
            - 'authenticated'
            - 'organization/{organizationId}:read'
            - 'organization/{organizationId}:update'
            - 'organization/{organizationId}/apiKeys:create'
            - 'organization/{organizationId}/apiKeys:delete'
            - 'organization/{organizationId}/apiKeys:update'
            - 'organization/{organizationId}/apiKeys:read'
            - 'organization/{organizationId}/apiKeys/{apiKeyId}:delete'
            - 'organization/{organizationId}/apiKeys/{apiKeyId}:update'
            - 'organization/{organizationId}/apiKeys/{apiKeyId}:read'
      tags:
        - bulk-organization
  '/bulk/organizations/{organizationId}/flags':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    post:
      description: |
        Perform a bulk operation on multiple `Flags` at one time.
        All operations will fail if any individual operation fails.
        The logged in `User` must have `Permission` to `create`, `update`, and/or `delete` `Flags` to perform the corresponding operation through a bulk operation.
      summary: 'Bulk Update Flags for an Organization'
      requestBody:
        '$ref': '#/components/requestBodies/BulkOrganizationFlagsRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/BulkOrganizationFlagsResponse'
          description: |
            # Success
            An Bulk Response for Organization API Keys
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
            - 'authenticated'
            - 'organization/{organizationId}:read'
            - 'organization/{organizationId}:update'
            - 'organization/{organizationId}/flags:create'
            - 'organization/{organizationId}/flags:delete'
            - 'organization/{organizationId}/flags:update'
            - 'organization/{organizationId}/flags:read'
            - 'organization/{organizationId}/flags/{flagId}:delete'
            - 'organization/{organizationId}/flags/{flagId}:update'
            - 'organization/{organizationId}/flags/{flagId}:read'
      tags:
        - bulk-organization
  '/bulk/organizations/{organizationId}/groups':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    post:
      description: |
        Perform a bulk operation on multiple `Permission` `Groups` at one time. |
        All operations will fail if any individual operation fails. |
        The logged in `User` must have `Permission` to `create`, `update`, and/or `delete` `Groups` to perform the corresponding operation through a bulk operation.
      summary: 'Bulk Update Groups for an Organization'
      requestBody:
        '$ref': '#/components/requestBodies/BulkOrganizationGroupsRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/BulkOrganizationGroupsResponse'
          description: |
            # Success
            An Bulk Response for Organization API Keys
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
            - 'authenticated'
            - 'organization/{organizationId}:read'
            - 'organization/{organizationId}:update'
            - 'organization/{organizationId}/groups:create'
            - 'organization/{organizationId}/groups:delete'
            - 'organization/{organizationId}/groups:update'
            - 'organization/{organizationId}/groups:read'
            - 'organization/{organizationId}/groups/{groupId}:delete'
            - 'organization/{organizationId}/groups/{groupId}:update'
            - 'organization/{organizationId}/groups/{groupId}:read'
      tags:
        - bulk-organization
  '/bulk/organizations/{organizationId}/members':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    post:
      description: |
        Perform a bulk operation on multiple members `Users` at one time. |
        All operations will fail if any individual operation fails. |
        The logged in `User` must have `Permission` to `create`, `update`, and/or `delete` member `Users` to perform the corresponding operation through a bulk operation.
      summary: 'Bulk Update Member Users for an Organization'
      responses:
        '200':
          description: ''
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - 'authenticated'
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/members:create'
          - 'organization/{organizationId}/members:delete'
          - 'organization/{organizationId}/members:update'
          - 'organization/{organizationId}/members:read'
          - 'organization/{organizationId}/members/{userId}:delete'
          - 'organization/{organizationId}/members/{userId}:update'
          - 'organization/{organizationId}/members/{userId}:read'
      tags:
        - bulk-organization
  '/bulk/organizations/{organizationId}/tags':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    post:
      description: |
        Perform a bulk operation on multiple `Tags` at one time. |
        All operations will fail if any individual operation fails. |
        The logged in `User` must have `Permission` to `create`, `update`, and/or `delete` `Tags` to perform the corresponding operation through a bulk operation.
      summary: 'Bulk Update Tags for an Organization'
      responses:
        '200':
          description: ''
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
            - 'authenticated'
            - 'organization/{organizationId}:read'
            - 'organization/{organizationId}/tags:create'
            - 'organization/{organizationId}/tags:delete'
            - 'organization/{organizationId}/tags:update'
            - 'organization/{organizationId}/tags:read'
            - 'organization/{organizationId}/tags/{tagId}:delete'
            - 'organization/{organizationId}/tags/{tagId}:update'
            - 'organization/{organizationId}/tags/{tagId}:read'  
      tags:
        - bulk-organization
  # '/flags/{clientId}/{organizationId}/{flagId}'
  '/organizations':
    get:
      description: |
        List all `Organizations` that the logged in `User` is a member of. |
        This endpoint is paginated and shows all `Organizations` which the logged in `User` owns or is a member of, with any `Permissions`
      summary: List Organizations
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/OrganizationList'
          description: |
            # Success
            A list of organizations of which the logged in user is either a member or owner
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - 'authenticated'
          - 'organization/{organizationId}:read' 
      tags:
        - organizations
    post:
      description: |
        Create a new `Organization` and assign the logged in `User` to be the owner.
        This creates a handful of additional `Permissions`, ` and `Tags` automatically for the new `Organization` 
      summary: Create Organization
      requestBody:
        '$ref': '#/components/requestBodies/CreateOrganizationRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/OrganizationWithId'
          description: |
            # Success
            The newly created organization
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '409':
          '$ref': '#/components/responses/409'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - organizations
  '/organizations/{organizationId}':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    delete:
      description: |
        Delete an `Organization` and all associated resources including `Permissions`, `Tags` and `V0Flags`. |
        The logged in `User` must be the owner of the `Organization` as there is no `delete` `Permission` for `Organizations`. 
      summary: 'Delete Organization'
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '429':
          '$ref': '#/components/responses/429'
      tags:
        - organizations
    get:
      description: |
        Read `Organization` Details.
        This endpoint returns high level `Organization` details and links to additional resource collections.
      summary: 'Get Organization by ID'
      responses:
        '200':
          description: ''
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read' 
      tags:
        - organizations
    patch:
      description: |
        Partially update an `Organization` with some fields that will be updated. |
        Omitted fields will be kept "as-is". |
        The logged in `User` must have `Permissions` for the updated fields.
      summary: 'Partially update Organization'
      responses:
        '200':
          description: ''
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
      tags:
        - organizations
    put:
      description: |
        Fully Update an `Organization` with some fields that will be updated. |
        Omitted fields are not allowed unless the field is nullable. Omitting a field will nullify the field. |
        The logged in `User` must have `Permissions` for any updated fields. |
        A field that is the same value is not considered updated.
      summary: 'Update Organization'
      responses:
        '200':
          description: ''
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
      tags:
        - organizations
  '/organizations/{organizationId}/audit-logs':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
      description: |
        List all `AuditLog` entries for an `Organization`. |
        This endpoint is paginated and 
      summary: 'List audit log entries for an organization'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/AuditLogEntriesList'
          description: |
            # Success
            A list of visible audit log entries, by default sorted most to least recent
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/audit-logs:read'
          # FIXME: list out permissions for individual resource read rights
      tags:
        - organizations-audit-logs
  '/organizations/{organizationId}/api-keys':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
      description: |
        List `APIKeys` for the `Organization`.
        Must have `read` `Permission` for `APIKeys` on the `Organization`
      summary: List APIKeys for an Organization
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyList'
          description: |
            # Success
            A list of visible API keys
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/api-keys:read'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:read'
      tags:
        - organizations-api-keys
    post:
      description: |
        Create an `APIKey` for the `Organization` which can be given access like any `User`
      summary: Create APIKey for an Organization
      requestBody:
        '$ref': '#components/requestBodies/CreateApiKeyRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The newly created API Key
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '409':
          '$ref': '#/components/responses/409'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/api-keys:read'
          - 'organization/{organizationId}/api-keys:create'
          - 'organization/{organizationId}/groups:read'
          - 'organization/{organizationId}/groups:create'          
      tags:
        - organizations-api-keys
  '/organizations/{organizationId}/api-keys/{apiKeyId}':
    parameters:
      - '$ref': '#/components/parameters/apiKeyId'
      - '$ref': '#/components/parameters/organizationId'
    delete:
      description: |
        Delete an `APIKey` for an `Organization`
      summary: Delete APIKey for an Organization
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/api-keys:delete'
          - 'organization/{organizationId}/api-keys:read'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:delete'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:read'
      tags:
        - organizations-api-keys
    get:
      description: |
        Get an APIKey for an `Organization` by ID
      summary: Get APIKey for an Organization by ID
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The API Key
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/api-keys:read'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:read'
      tags:
        - organizations-api-keys
    patch:
      description: |
        Partially update an API key
      summary: Partially update API Key
      requestBody:
        '$ref': '#/components/requestBodies/PartialUpdateApiKeyRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The newly update API Key
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/api-keys:read'
          - 'organization/{organizationId}/api-keys:update'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:read'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:update'
      tags:
        - organizations-api-keys
    put:
      description: |
        Update an API key
      summary: Update API Key
      requestBody:
        '$ref': '#/components/requestBodies/UpdateApiKeyRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The newly updated API Key
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/api-keys:read'
          - 'organization/{organizationId}/api-keys:update'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:read'
          - 'organization/{organizationId}/api-keys/{apiKeyId}:update'
      tags:
        - organizations-api-keys
  '/organizations/{organizationId}/flags':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
      description: |
        List flags for an `Organization`.
        This lists all flags for an organization that a user
      summary: List Flags for an Organization
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/FlagList'
          description: |
            # Success
            A list of Flags
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/flags:read'
          - 'organization/{organizationId}/flags/{flagId}:read'
      tags:
        - flags
        - organizations-flags
    post:
      description: |
        Create a flag for an `Organization`.
      summary: Create Flag for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/CreateFlagRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/FlagWithId'
          description: |
            # Success
            The newly created Flag
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/flags:create'
      tags:
        - flags
        - organizations-flags
  '/organizations/{organizationId}/flags/{flagId}':
    parameters:
      - '$ref': '#/components/parameters/flagId'
      - '$ref': '#/components/parameters/organizationId'
    delete:
      description: |
        Delete a flag for an `Organization`.
      summary: Delete a Flag by Id
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/flags:delete'
          - 'organization/{organizationId}/flags/{flagId}:delete'
      tags:
        - flags
        - organizations-flags
    get:
      description: |
        Get a flag for an `Organization` by id.
      summary: Get a Flag by Id
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/FlagWithId'
          description: |
            # Success
            The Flag
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/flags:read'
          - 'organization/{organizationId}/flags/{flagId}:read'
      tags:
        - flags
        - organizations-flags
    patch:
      description: |
        Update a flag for an `Organization`.
      summary: Partially Update a Flag for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/PartialUpdateFlagRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/FlagWithId'
          description: |
            # Success
            The updated Flag
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/flags:update'
          - 'organization/{organizationId}/flags/{flagId}:update'
      tags:
        - flags
        - organizations-flags
    put:
      description: |
        Update a flag for an `Organization`.
      summary: Update a Flag for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/UpdateFlagRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/FlagWithId'
          description: |
            # Success
            The updated Flag
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/flags:update'
          - 'organization/{organizationId}/flags/{flagId}:update'
      tags:
        - flags
        - organizations-flags
  '/organizations/{organizationId}/groups':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
      description: |
        List groups for an `Organization`.
        This lists all groups for an organization that a user
      summary: List Groups for an Organization
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/GroupList'
          description: |
            # Success
            A list of Groups
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/groups:read'
          - 'organization/{organizationId}/groups/{groupId}:read'
      tags:
        - organizations-groups
    post:
      description: |
        Create a Group for an `Organization`.
      summary: Create a Group for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/CreateGroupRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/GroupWithId'
          description: |
            # Success
            The newly created Group
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/groups:create'
      tags:
        - organizations-groups
  '/organizations/{organizationId}/groups/{groupId}':
    parameters:
      - '$ref': '#/components/parameters/groupId'
      - '$ref': '#/components/parameters/organizationId'
    delete:
      description: |
        Delete a Group for an `Organization`.
      summary: Delete a Group by Id
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/groups:delete'
          - 'organization/{organizationId}/groups/{groupId}:delete'
      tags:
        - organizations-groups
    get:
      description: |
        Get a Group for an `Organization` by.
      summary: Get a Group by Id
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/GroupWithId'
          description: |
            # Success
            The Group
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/groups:read'
          - 'organization/{organizationId}/groups/{groupId}:read'
      tags:
        - organizations-groups
    patch:
      description: |
        Update a Group for an `Organization`.
      summary: Partially Update a Group for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/PartialUpdateGroupRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/GroupWithId'
          description: |
            # Success
            The newly created Group
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/groups:update'
          - 'organization/{organizationId}/groups/{groupId}:update'
      tags:
        - organizations-groups
    put:
      description: |
        Update a Group for an `Organization`.
      summary: Update a Group for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/UpdateGroupRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/GroupWithId'
          description: |
            # Success
            The newly created Group
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/groups:update'
          - 'organization/{organizationId}/groups/{groupId}:update'
      tags:
        - organizations-groups
  '/organizations/{organizationId}/members':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
      description: |
        List Members for an `Organization`.
        This lists all Members for an organization
      summary: List Members for an Organization
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/MemberList'
          description: |
            # Success
            A list of Members
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/members:read'
          - 'organization/{organizationId}/members/{memberId}:read'
      tags:
        - organizations-members
    post:
      description: |
        Create a Member relationship for an `Organization`
      summary: Create a Group for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/CreateMemberRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/MemberWithId'
          description: |
            # Success
            The newly created Group
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/members:create'
      tags:
        - organizations-members
  '/organizations/{organizationId}/members/{memberId}':
    parameters:
      - '$ref': '#/components/parameters/memberId'
      - '$ref': '#/components/parameters/organizationId'
    delete:
      description: |
        Delete a Member from an `Organization`.
      summary: Delete a Member by Id
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/members:delete'
          - 'organization/{organizationId}/members/{memberId}:delete'
      tags:
        - organizations-members
    get:
      description: |
        Get a Member for an `Organization` by Id.
      summary: Get a Member by Id
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/MemberWithId'
          description: |
            # Success
            The Group
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/members:read'
          - 'organization/{organizationId}/members/{memberId}:read'
      tags:
        - organizations-members
    patch:
      description: |
        Partially Update a Member for an `Organization`.
      summary: Partially Update a Member for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/PartialUpdateMemberRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/MemberWithId'
          description: |
            # Success
            The newly created Group
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/members:update'
          - 'organization/{organizationId}/members/{memberId}:update'
      tags:
        - organizations-members
    put:
      description: |
        Update a Member for an `Organization`.
      summary: Update a Member for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/UpdateMemberRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/MemberWithId'
          description: |
            # Success
            The updated member
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/members:update'
          - 'organization/{organizationId}/members/{memberId}:update'
      tags:
        - organizations-members
  '/organizations/{organizationId}/payment-plan':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
    patch:
    put:
  '/organizations/{organizationId}/payments':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
  '/organizations/{organizationId}/payments/{paymentId}':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
      - '$ref': '#/components/parameters/paymentId'
    get:
    patch:
    put:
  '/organizations/{organizationId}/tags':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
    get:
      description: |
        List Tags for an `Organization`.
        This lists all tags for an organization
      summary: List Tags for an Organization
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/TagList'
          description: |
            # Success
            A list of tags
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/tags:read'
          - 'organization/{organizationId}/tags/{tagId}:read'
      tags:
        - tags
        - organizations-tags
    post:
      description: |
        Create a tag for an `Organization`.
      summary: Create Tag for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/CreateFlagRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/TagWithId'
          description: |
            # Success
            The newly created Tag
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/tags:create'
      tags:
        - tags
        - organizations-tags
  '/organizations/{organizationId}/tags/{tagId}':
    parameters:
      - '$ref': '#/components/parameters/organizationId'
      - '$ref': '#/components/parameters/tagId'
    delete:
      description: |
        Delete a Tag for an `Organization`.
      summary: Delete a Tag by Id
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/tags:delete'
          - 'organization/{organizationId}/tags/{tagId}:delete'
      tags:
        - tags
        - organizations-tags
    get:
      description: |
        Get a tag for an `Organization` by id
      summary: Get a Tag by Id
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/TagWithId'
          description: |
            # Success
            The Tag
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}/tags:read'
          - 'organization/{organizationId}/tags/{tagId}:read'
      tags:
        - tags
        - organizations-tags
    patch:
      description: |
        Update a tags for an `Organization`.
      summary: Partially Update a Tag for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/PartialUpdateTagRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/TagWithId'
          description: |
            # Success
            The updated tag
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/tags:update'
          - 'organization/{organizationId}/tags/{tagId}:update'
      tags:
        - tags
        - organizations-tags
    put:
      description: |
        Update a tag for an `Organization`.
      summary: Update a Tag for an Organization
      requestBody:
        '$ref': '#/components/requestBodies/UpdateTagRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/TagWithId'
          description: |
            # Success
            The updated tag
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read'
          - 'organization/{organizationId}:update'
          - 'organization/{organizationId}/tags:update'
          - 'organization/{organizationId}/tags/{tagId}:update'
      tags:
        - tags
        - organizations-tags
  '/payment-plans':
    get:
      description: |
        List payment plan options for the application.
      summary: List Payment plans
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/PaymentPlanList'
          description: |
            # Success
            A list of payment plans
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - payment-plans
  '/payment-plans/{paymentPlanId}':
    parameters:
      - '$ref': '#/components/parameters/paymentPlanId'
    get:
      description: |
        Get a payment plan by ID
      summary: Get Payment Plan By ID
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/PaymentPlan'
          description: |
            # Success
            The payment plan
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - payment-plans
  '/query/api-keys':
    post:
      description: |
        Perform an API Keys search.
      summary: Query API Keys
      requestBody:
        '$ref': '#/components/requestBodies/QueryApiKeysRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyList'
          description: |
            # Success
            A list of matching API Keys
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'api-keys/{apiKeyId}:read'
          - 'organizations/{organizationId}/api-keys:read'
          - 'organizations/{organizationId}/api-keys/{apiKey}:read'
      tags:
        - query
        - api-keys
  '/query/audit-logs':
    post:
      description: |
        Perform an Audit log search.
      summary: Query Audit Log Entries
      requestBody:
        '$ref': '#/components/requestBodies/QueryAuditLogsRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/AuditLogEntriesList'
          description: |
            # Success
            A list of matching Audit Log Entries
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'audit-logs/{auditLogId}:read'
          - 'organizations/{organizationId}/audit-logs:read'
          - 'organizations/{organizationId}/audit-logs/{auditLogId}:read'
      tags:
        - query
        - api-keys
  '/query/organizations':
    post:
      description: |
        Perform an organization search.
      summary: Query Organizations
      requestBody:
        '$ref': '#/components/requestBodies/QueryOrganizationsRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/OrganizationList'
          description: |
            # Success
            A list of matching Organizations
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read' 
      tags:
        - query
        - api-keys
  '/query/flags':
    post:
      description: |
        Perform an flags search.
      summary: Query Flags
      requestBody:
        '$ref': '#/components/requestBodies/QueryFlagsRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/FlagList'
          description: |
            # Success
            A list of matching Flags
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read' 
          - 'organization/{organizationId}/flags:read' 
          - 'organization/{organizationId}/flags/{flagId}:read' 
      tags:
        - query
        - flags
  '/query/groups':
    post:
      description: |
        Perform an group search.
      summary: Query Groups
      requestBody:
        '$ref': '#/components/requestBodies/QueryGroupsRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/GroupList'
          description: |
            # Success
            A list of matching Groups
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read' 
          - 'organization/{organizationId}/groups:read' 
          - 'organization/{organizationId}/groups/{groupId}:read' 
      tags:
        - query
        - groups
  '/query/tags':
    post:
      description: |
        Perform an tags search.
      summary: Query Tags
      requestBody:
        '$ref': '#/components/requestBodies/QueryTagsRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/TagList'
          description: |
            # Success
            A list of matching Tags
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
          - 'organization/{organizationId}:read' 
          - 'organization/{organizationId}/tags:read' 
          - 'organization/{organizationId}/tags/{tagId}:read' 
      tags:
        - query
        - tags
  '/query/users':
    post:
      description: |
        Perform an flags search.
      summary: Query Flags
      requestBody:
        '$ref': '#/components/requestBodies/QueryUsersRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/UserList'
          description: |
            # Success
            A list of matching Flags
        '401':
          '$ref': '#/components/responses/401'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - query
        - users
  '/users/{userId}':
    parameters:
      - '$ref': '#/components/parameters/userId'
    delete:
      description: |
        Delete user
      summary: Delete User
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '406':
          '$ref': '#/components/responses/406'
    get:
      description: |
        Get User 
      summary: Get User by Id
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/UserWithId'
          description: |
            # Success
            The User
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - users
    patch:
      description: |
        Update a user
      summary: Partially Update a User
      requestBody:
        '$ref': '#/components/requestBodies/PartialUpdateUserRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/UserWithId'
          description: |
            # Success
            The updated user
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
    put:
      description: |
        Update a user.
      summary: Update a User
      requestBody:
        '$ref': '#/components/requestBodies/UpdateUserRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/UserWithId'
          description: |
            # Success
            The updated user
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
  '/users/{userId}/api-keys':
    parameters:
      - '$ref': '#/components/parameters/userId'
    get:
      description: |
        List `APIKeys` for the `User`.
        Must have `read` `Permission` for `APIKeys` on the `User`
      summary: List APIKeys for a User
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyList'
          description: |
            # Success
            A list of visible API keys
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - users-api-keys
    post:
      description: |
        Create an `APIKey` for the `User` which can be given access like any `User`
      summary: Create APIKey for a User
      requestBody:
        '$ref': '#components/requestBodies/CreateApiKeyRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The newly created API Key
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '409':
          '$ref': '#/components/responses/409'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated       
      tags:
        - users-api-keys
  '/users/{userId}/api-keys/{apiKeyId}':
    parameters:
      - '$ref': '#/components/parameters/apiKeyId'
      - '$ref': '#/components/parameters/userId'
    delete:
      description: |
        Delete an `APIKey` for a `User`
      summary: Delete APIKey for a User
      responses:
        '204':
          '$ref': '#/components/responses/204'
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - users-api-keys
    get:
      description: |
        Get an APIKey for a `User` by ID
      summary: Get APIKey for a User by ID
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The API Key
        '401':
          '$ref': '#/components/responses/401'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - users-api-keys
    patch:
      description: |
        Partially update an API key
      summary: Partially update API Key for a User
      requestBody:
        '$ref': '#/components/requestBodies/PartialUpdateApiKeyRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The newly update API Key
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - users-api-keys
    put:
      description: |
        Update an API key
      summary: Update API Key
      requestBody:
        '$ref': '#/components/requestBodies/UpdateApiKeyRequest'
      responses:
        '200':
          content:
            'application/json':
              schema:
                '$ref': '#/components/schemas/ApiKeyWithId'
          description: |
            # Success
            The newly updated API Key
        '401':
          '$ref': '#/components/responses/401'
        '403':
          '$ref': '#/components/responses/403'
        '404':
          '$ref': '#/components/responses/404'
        '406':
          '$ref': '#/components/responses/406'
        '415':
          '$ref': '#/components/responses/415'
        '422':
          '$ref': '#/components/responses/422'
        '429':
          '$ref': '#/components/responses/429'
      security:
        - token-auth:
          - authenticated
      tags:
        - users-api-keys
components:
  headers:
    Accept:
      description: 'Acceptable MIME Content-Types for the response'
      schema:
        type: string
        format: 'MIME type'
        enum:
          - 'application/json'
    Content-Type:
      description: 'The Content-Type of the response'
      schema:
        type: string
        format: 'MIME type'
        enum:
          - 'application/json'
  parameters:
    apiKeyId: 
      description: 'API Key Identifier'
      in: path
      name: apiKeyId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    auditLogId: 
      description: 'Audit Log Identifier'
      in: path
      name: auditLogId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    flagId: 
      description: 'Flag Identifier'
      in: path
      name: flagId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    groupId: 
      description: 'Group Identifier'
      in: path
      name: groupId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    memberId:
      description: 'Organization Group Member'
      in: path
      name: memberId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    organizationId:
      description: 'Organization Identifier'
      in: path
      name: organizationId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    paginationCursor:
      description: 'The last item from the page prior to this'
      in: query
      name: cursor
      required: false
      style: form
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    paginationDirection:
      description: 'The direction to to sort the page result'
      in: query
      name: dir
      required: false
      style: form
      schema:
        default: desc
        enum:
          - asc
          - desc
        type: string
    paginationLimit:
      description: 'The maximum number of items per for the API'
      in: query
      name: limit
      required: false
      style: form
      schema:
        default: 100
        format: integer
        maximum: 100
        minimum: 1
        type: number
    paymentId:
      description: 'Payment Identifier'
      in: path
      name: paymentId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    paymentPlanId:
      description: 'Payment Plan Identifier'
      in: path
      name: paymentPlanId
      required: true
      style: simple
      schema:
        '$ref': '#/components/schemas/UrlSafeId'
    tagId:
      description: 'Tag Identifier'
      in: path
      name: tagId
      required: true
      style: simple
      schema: 
        '$ref': '#/components/schemas/UrlSafeId'
    userId:
      description: 'User Identifier'
      in: path
      name: userId
      required: true
      style: simple
      schema: 
        '$ref': '#/components/schemas/UrlSafeId'
  requestBodies:
    BulkOrganizationApiKeysRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/BulkOrganizationApiKeysRequest'
      description: |
        A Request for bulk changes to Organization API Keys
    BulkOrganizationFlagsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/BulkOrganizationFlagsRequest'
      description: |
        A Request for bulk changes to Organization Flags
    BulkOrganizationGroupsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/BulkOrganizationGroupsRequest'
      description: |
        A Request for bulk changes to Organization Groups
    BulkOrganizationMembersRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/BulkOrganizationMembersRequest'
      description: |
        A Request for bulk changes to Organization Members
    BulkOrganizationTagsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/BulkOrganizationTagsRequest'
      description: |
        A Request for bulk changes to Organization API Keys
    CreateApiKeyRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/ApiKey'
      description: |
        A request to create a new API Key
    CreateFlagRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/Flag'
      description: |
        A request to create a new flag
    CreateGroupRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/Group'
      description: |
        A request to create a new group
    CreateMemberRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/Member'
      description: |
        A request to add a member to a group in an organization
    CreateOrganizationRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/Organization'
      description: |
        A request to create a new organization
    PartialUpdateApiKeyRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/PartialApiKey'
      description: |
        A request to partially update an API key
    PartialUpdateFlagRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/PartialFlag'
      description: |
        A request to partially update a Flag
    PartialUpdateGroupRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/PartialGroup'
      description: |
        A request to partially update a Group
    PartialUpdateMemberRequest:
      content:
        'application/json':
          schema:
            anyOf:
              - '$ref': '#/components/schemas/PartialMember'
              - '$ref': '#/components/schemas/MemberStatusMetaObject'
      description: |
        A request to partially update a Group
    PartialUpdateTagRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/PartialTag'
      description: |
        A request to partially update a Tag
    PartialUpdateUserRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/PartialUser'
      description: |
        A request to partially update a user
    QueryApiKeysRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/QueryApiKeysRequest'
      description: |
        A request to query api keys
    QueryAuditLogsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/QueryAuditLogsRequest'
      description: |
        A request to query audit logs
    QueryFlagsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/QueryFlagsRequest'
      description: |
        A request to query flags
    QueryGroupsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/QueryGroupsRequest'
      description: |
        A request to query groups
    QueryOrganizationsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/QueryOrganizationsRequest'
      description: |
        A request to query organizations
    QueryTagsRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/QueryTagsRequest'
      description: |
        A request to query tags
    QueryUsersRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/QueryUsersRequest'
      description: |
        A request to query users
    UpdateApiKeyRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/ApiKey'
      description: |
        A request to update an API key
    UpdateFlagRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/Flag'
      description: |
        A request to update a Flag
    UpdateGroupRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/Group'
      description: |
        A request to update a Group
    UpdateMemberRequest:
      content:
        'application/json':
          schema:
            allOf:
              - '$ref': '#/components/schemas/Member'
              - '$ref': '#/components/schemas/MemberStatusMetaObject'
      description: |
        A request to update a Member
    UpdateTagRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/Tag'
      description: |
        A request to update a tag
    UpdateUserRequest:
      content:
        'application/json':
          schema:
            '$ref': '#/components/schemas/User'
      description: |
        A request to update a user
  responses:
    '204':
      description: |
        # Standard 204 No Content

        This is a successful response code returned when the API has deleted a resource.
        Note: deletion is an erasure, not a "pop" removal, so nothing is returned.
        If your interaction requires "pop" style behavior, GET then DELETE.
    '400':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 400 Bad Request

        This error is returned when the client has sent a request that the server understands but also all of the following are true:

        * The User is Authenticated (Otherwise, 401)
          - The User has provided an `Authorization` header correctly
          - The `Authorization` header is still valid
        * The Resource and path mapping exists (Otherwise, 404)
          - The User has permissions to see that the resource exists
        * The HTTP Method used in the request exists for the path/resource (Otherwise, 405)
        * The `Accept` header used in the request is recognized (Otherwise, 406)
        * The `Content-Type` header used in the request is recognized (Otherwise, 415)
        * The implicit data validations described in the schema are met (Otherwise, 422)
        * The user is not rate limited (Otherwise, 429)
        * The User has permissions to perform the action they wish on the resource (Otherwise 403 unless read only)

        The error message will attempt to describe the client issue that occurs, but most likely this is due to sending invalid JSON in the request.
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
    '401':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 401 Unauthorized Error

        This error is returned for any API call which requires an Authorization header when none is provided or when an invalid Authorization header is provided.
        This error is **not** returned for cases where the user is correctly Authenticated but does not have authorization to perform the action, despite it's name.
        For un-authorized, authenticated errors, a `403 Forbidden` or `404 Not Found` (in some cases where enumeration is a risk) error will instead be used.

        This error provides instructions to the user via headers and body for how to log in.
        These instructions are not intended to be followed automatically, but rather are used for developers who might be debugging this error.

        This error is used to indicated **expired** tokens as well, which developers could use to signal logging back in.
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
        Location:
          description: 'The Login URL'
          schema:
            type: string
            format: url
        WWW-Authenticate:
          description: 'A header showing token auth is expected'
          schema:
            type: string
            format: 'token WWW-Authenticate'
    '403':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 403 Forbidden Error
        
        This error is returned for any API call which requires permissions that a user does not have.
        This error is **not** returned when the user is not properly authenticated or when the user does not have a list-equivalent read permission.
        In those cases a `401 Unauthorized` or `404 Not Found` error is sent, respectively.
    '404':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 404 Not Found
        
        This error is returned for any API call in which the resource cannot be found or its existence cannot be confirmed to the caller because they don't have sufficient permission.
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
    '405':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 405 Method Not Allowed

        This error is returned by the server when an unsupported method is called on a path that is recognized, but does not have that HTTP verb available.
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
    '406':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 406 Not Acceptable

        This error is returned when the client sends an `Accept` header with an unsupported MIME type.
        Currently the only supported MIME type is `application/json`
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
    '409':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 409 Conflict

        The resource that is trying to be created already exists.
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
    '415':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 415 Unsupported Media Type

        This error is returned when the client sends a request with a `Content-Type` header for an unsupported MIME type.
        Currently the only supported MIME type is `application/json`
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
    '422':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 422 Unprocessable Entity

        This error is returned when the request contains valid JSON and headers on a valid resource, but some backend validation of the attributes fails.
        The error will describe which fields (or combination of fields) have failed validation and why.
        This error will attempt to comprehensively describe all errors in validation, but may be unable to if resources cascade.
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
    '429':
      content:
        'application/json':
          schema:
            type: object
      description: |
        # Standard 429 Too Many Requests

        This error is returned when the client is being rate limited.
        Typically this error will return with information about the limited resource, the limit, and when the client can call back.
        If you're getting this error, it may be worth reaching out for support or using a back-off algorithm like "full jitter".
      headers:
        Content-Type:
          '$ref': '#/components/headers/Content-Type'
  securitySchemes:
    token-auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Action:
      type: string
      enum:
        - create
        - delete
        - read
        - update
    AdminSubject:
      description: |
        # Admin Subject
        A Permission "Subject" that references an Admin
      properties:
        adminName:
          maxLength: 32
          minLength: 1
          type: string
        type:
          enum:
            - 'admin'
          type: string
      required:
        - type
    ApiKey:
      allOf:
        - '$ref': '#/components/schemas/PartialApiKey'
        - '$ref': '#/components/schemas/WithTimestampsMetaObject'
      description: |
        # API Key
        A key used as a bearer token for API access
      required:
        - name
      type: object
    ApiKeyList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/ApiKeyWithId'
              type: array
          required:
            - results
          type: object
    ApiKeyWithId:
      allOf:
        - '$ref': '#/components/schemas/ApiKey'
        - '$ref': '#/components/schemas/WithIdMetaObject'
    AuditLogEntry:
      description: |
        # Audit Log entry
        A log entry in the Audit Log that is used to trace interactions and changes.
      properties:
        action:
          '$ref': '#/components/schemas/Action'
        resource:
          '$ref': '#/components/schemas/Resource'
        subject:
          '$ref': '#/components/schemas/Subject'
      required:
        - action
        - resource
        - subject
      type: object
    AuditLogEntriesList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/AuditLogEntry'
              type: array
          required:
            - results
          type: object
      description: |
        # Audit Log List
        A list of Audit Log Entries
    BaseFlag:
      allOf:
        - '$ref': '#/components/schemas/PartialBaseFlag'
      required:
        - name
        - organizationId
      type: object
    BulkOrganizationApiKeysRequest:
      properties:
        create:
          items:
            '$ref': '#/components/schemas/ApiKey'
          type: array
        delete:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        update:
          items:
            '$ref': '#/components/schemas/ApiKeyWithId'
          type: array
    BulkOrganizationApiKeysResponse:
      properties:
        created:
          items:
            '$ref': '#/components/schemas/ApiKeyWithId'
          type: array
        deletedIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        updated:
          items:
            '$ref': '#/components/schemas/ApiKeyWithId'
          type: array
      required:
        - created
        - deletedIds
        - updated
    BulkOrganizationFlagsRequest:
      properties:
        create:
          items:
            '$ref': '#/components/schemas/Flag'
          type: array
        delete:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        update:
          items:
            '$ref': '#/components/schemas/FlagWithId'
          type: array
    BulkOrganizationFlagsResponse:
      properties:
        created:
          items:
            '$ref': '#/components/schemas/FlagWithId'
          type: array
        deletedIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        updated:
          items:
            '$ref': '#/components/schemas/FlagWithId'
          type: array
      required:
        - created
        - deletedIds
        - updated
    BulkOrganizationGroupsRequest:
      properties:
        create:
          items:
            '$ref': '#/components/schemas/Group'
          type: array
        delete:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        update:
          items:
            '$ref': '#/components/schemas/GroupWithId'
          type: array
    BulkOrganizationGroupsResponse:
      properties:
        created:
          items:
            '$ref': '#/components/schemas/GroupWithId'
          type: array
        deletedIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        updated:
          items:
            '$ref': '#/components/schemas/GroupWithId'
          type: array
      required:
        - created
        - deletedIds
        - updated
    BulkOrganizationMembersRequest:
      properties:
        create:
          items:
            '$ref': '#/components/schemas/Member'
          type: array
        delete:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        update:
          items:
            '$ref': '#/components/schemas/Member'
          type: array
    BulkOrganizationMembersResponse:
      properties:
        created:
          items:
            '$ref': '#/components/schemas/Member'
          type: array
        deletedIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        updated:
          items:
            '$ref': '#/components/schemas/Member'
          type: array
      required:
        - created
        - deletedIds
        - updated
    BulkOrganizationTagsRequest:
      properties:
        create:
          items:
            '$ref': '#/components/schemas/Tag'
          type: array
        delete:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        update:
          items:
            '$ref': '#/components/schemas/TagWithId'
          type: array
    BulkOrganizationTagsResponse:
      properties:
        created:
          items:
            '$ref': '#/components/schemas/TagWithId'
          type: array
        deletedIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        updated:
          items:
            '$ref': '#/components/schemas/TagWithId'
          type: array
      required:
        - created
        - deletedIds
        - updated
    Flag:
      allOf:
        - '$ref': '#/components/schemas/BaseFlag'
        - '$ref': '#/components/schemas/FlagTypes'
    FlagList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/FlagWithId'
              type: array
          required:
            - results
          type: object
      description: |
        # Flag List
        A list of Flags
      type: object
    FlagTypeBoolean:
      properties:
        type:
          enum:
            - boolean
          type: string
        value:
          type: boolean
      required:
        - type
        - value
      type: object
    FlagTypes:
      oneOf:
        - '$ref': '#/components/schemas/FlagTypeBoolean'
    FlagWithId:
      allOf:
        - '$ref': '#/components/schemas/Flag'
        - '$ref': '#/components/schemas/WithIdMetaObject'
    FlagResource:
      properties:
        flagId:
          '$ref': '#/components/schemas/UrlSafeId'
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - flag
          type: string
      required:
        - flagId
        - organizationId
        - type
      type: object
    Group:
      allOf:
        - '$ref': '#/components/schemas/PartialGroup'
      description: |
        A group to assign users and api keys to permissions
      required:
        - memberApiKeyIds
        - memberUserIds
        - name
        - permissions
    GroupList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/GroupWithId'
              type: array
          required:
            - results
          type: object
    GroupWithId:
      allOf:
        - '$ref': '#/components/schemas/Group'
        - '$ref': '#/components/schemas/WithIdMetaObject'
    GroupResource:
      properties:
        groupId:
          '$ref': '#/components/schemas/UrlSafeId'
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - organization-group
          type: string
      required:
        - groupId
        - organizationId
        - type
    IdentifiedObject:
      properties:
        id:
          '$ref': '#/components/schemas/UrlSafeId'
      required:
        - id
      type: object
    ListResponseMetaObject:
      properties:
        count:
          description: the total number of list elements
          format: integer
          minimum: 0
          type: number
        next:
          description: the url for the next "page" of the list
          format: url
          type: string
        previous:
          description: the url for the previous "page" of the list
          format: url
          type: string
      required:
        - count
      type: object
    Member:
      allOf:
        - '$ref': '#/components/schemas/PartialMember'
      required:
        - groupIds
      type: object
    MemberList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/MemberWithId'
              type: array
          required:
            - results
          type: object
      type: object
    MemberStatusMetaObject:
      properties:
        status:
          enum:
            - accepted
            - blocked
            - pending
          type: string
      required:
        - status
      type: object
    MemberWithId:
      allOf:
        - '$ref': '#/components/schemas/Member'
        - '$ref': '#/components/schemas/MemberStatusMetaObject'
        - '$ref': '#/components/schemas/WithIdMetaObject'
    Organization:
      type: object
    OrganizationApiKeySubjectOrResource:
      properties:
        apiKeyId:
          '$ref': '#/components/schemas/UrlSafeId'
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - organization-api-key
          type: string
      required:
        - apiKeyId
        - organizationId
        - type
    OrganizationList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/OrganizationWithId'
              type: array
          required:
            - results
          type: object
      type: object
    OrganizationMemberResource:
      properties:
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - organization-member
          type: string
        userId:
          '$ref': '#/components/schemas/UrlSafeId'
      required:
        - organizationId
        - type
        - userId
    OrganizationPaymentResource:
      properties:
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
        paymentId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - organization-payment
          type: string
      required:
        - organizationId
        - paymentId
        - type
    OrganizationPaymentPlanResource:
      properties:
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - organization-payment-plan
          type: string
      required:
        - organizationId
        - type
    OrganizationResource:
      properties:
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - organization
          type: string
      required:
        - organizationId
        - type
    OrganizationWithId:
      allOf:
        - '$ref': '#/components/schemas/Organization'
        - '$ref': '#/components/schemas/WithIdMetaObject'
      type: object
    PartialApiKey:
      properties:
          createdBy:
            '$ref': '#/components/schemas/Subject'
          description:
            maxLength: 200
            minLength: 0
            type: string
          name:
            type: string
            maxLength: 32
            minLength: 1
      type: object
    PartialBaseFlag:
      properties:
        name:
          minimum: 1
          maximum: 255
          type: string
        organizationId:
          '$ref': '#/components/schemas/UrlSafeId'
      type: object
    PartialFlag:
      anyOf:
        - '$ref': '#/components/schemas/PartialBaseFlag'
        - '$ref': '#/components/schemas/FlagTypes'
    PartialGroup:
      properties:
        memberApiKeyIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        memberUserIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
        name:
          minLength: 1
          maxLength: 31
          type: string
        permissions:
          items:
            '$ref': '#/components/schemas/Permission'
          type: array
      type: object
    PartialMember:
      properties:
        groupIds:
          items:
            '$ref': '#/components/schemas/UrlSafeId'
          type: array
      type: object
    PartialTag:
      properties:
        name:
          type: string
      type: object
    PartialUser:
      properties:
        alias:
          minLength: 1
          maxLength: 31
          type: string
    PaymentPlan:
      allOf:
        - '$ref': '#/components/schemas/WithIdMetaObject'
        - properties:
            description:
              maxLength: 2047
              minLength: 1
              type: string
            schedule:
              enum:
                - monthly
                - yearly
              type: string
            details:
              type: object
          required:
            - description
            - schedule
            - details
          type: object
    PaymentPlanList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/PaymentPlan'
              type: array
          required:
            - results
          type: object
      description: |
        # Payment Plan List
        A list of Payment plans
    Permission:
      properties:
        action:
          '$ref': '#/components/schemas/Action'
        resource:
          '$ref': '#/components/schemas/Resource'
        subject:
          '$ref': '#/components/schemas/Subject'
      required:
        - action
        - resource
        - subject
      type: object
    QueryApiKeysRequest:
      oneOf:
        - '$ref': '#/components/schemas/WithQueryCreatedAtTimestampMetaObject'
        - '$ref': '#/components/schemas/WithQueryModifiedAtTimestampMetaObject'
        - '$ref': '#/components/schemas/WithQueryNameMetaObject'
        - '$ref': '#/components/schemas/WithQueryOrganizationIdMetaObject'
      type: object
    QueryAuditLogsRequest:
      oneOf:
        - '$ref': '#/components/schemas/WithQueryCreatedAtTimestampMetaObject'
      type: object
    QueryFlagsRequest:
      oneOf:
        - '$ref': '#/components/schemas/WithQueryCreatedAtTimestampMetaObject'
      type: object
    QueryGroupsRequest:
      oneOf:
        - '$ref': '#/components/schemas/WithQueryCreatedAtTimestampMetaObject'
      type: object
    QueryOrganizationsRequest:
      oneOf:
        - '$ref': '#/components/schemas/WithQueryCreatedAtTimestampMetaObject'
      type: object
    QueryTagsRequest:
      oneOf:
        - '$ref': '#/components/schemas/WithQueryCreatedAtTimestampMetaObject'
      type: object
    QueryUsersRequest:
      oneOf:
        - '$ref': '#/components/schemas/WithQueryCreatedAtTimestampMetaObject'
      type: object
    Resource:
      oneOf:
        - '$ref': '#/components/schemas/FlagResource'
        - '$ref': '#/components/schemas/GroupResource'
        - '$ref': '#/components/schemas/OrganizationApiKeySubjectOrResource'
        - '$ref': '#/components/schemas/OrganizationMemberResource'
        - '$ref': '#/components/schemas/OrganizationPaymentResource'
        - '$ref': '#/components/schemas/OrganizationPaymentPlanResource'
        - '$ref': '#/components/schemas/OrganizationResource'
        - '$ref': '#/components/schemas/UserSubjectOrResource'
        - '$ref': '#/components/schemas/UserApiKeySubjectOrResource'
    Rfc3339Iso8601DateTime:
      description: |
        A date time stored as a string, formatted using ISO8601, RFC3339
      format: date-time
      type: string
    Subject:
      oneOf:
        - '$ref': '#/components/schemas/AdminSubject'
        - '$ref': '#/components/schemas/OrganizationApiKeySubjectOrResource'
        - '$ref': '#/components/schemas/UserSubjectOrResource'
        - '$ref': '#/components/schemas/UserApiKeySubjectOrResource'
    Tag:

      required:
        - name
      type: object
    TagList:
      allOf:
        - '$ref': '#/components/schemas/ListResponseMetaObject'
        - properties:
            results:
              items:
                '$ref': '#/components/schemas/TagWithId'
              type: array
          required:
            - results
          type: object
      type: object
    TagWithId:
      allOf:
        - '$ref': '#/components/schemas/Tag'
        - '$ref': '#/components/schemas/WithIdMetaObject'
    UrlSafeId:
      format: ID
      maxLength: 32
      minLength: 8
      type: string
    UserSubjectOrResource:
      properties:
        type:
          enum:
            - user
          type: string
        userId:
          '$ref': '#/components/schemas/UrlSafeId'
      required:
        - type
        - userId
    UserApiKeySubjectOrResource:
      properties:
        apiKeyId:
          '$ref': '#/components/schemas/UrlSafeId'
        type:
          enum:
            - user-api-key
          type: string
        userId:
          '$ref': '#/components/schemas/UrlSafeId'
      required:
        - apiKeyId
        - type
        - userId
    WithCreatedAtMetaObject:
      properties:
        createdAt:
          '$ref': '#/components/schemas/Rfc3339Iso8601DateTime'
      required:
        - createdAt
      type: object
    WithDeletedAtMetaObject:
      properties:
        deletedAt:
          '$ref': '#/components/schemas/Rfc3339Iso8601DateTime'
      required:
        - deletedAt
      type: object
    WithIdMetaObject:
      properties:
        id:
          '$ref': '#/components/schemas/UrlSafeId'
      required:
        - id
      type: object
    WithModifiedAtMetaObject:
      properties:
        modifiedAt:
          '$ref': '#/components/schemas/Rfc3339Iso8601DateTime'
      required:
        - modifiedAt
      type: object
    WithQueryCreatedAtTimestampMetaObject:
      properties:
        createdAt:
          anyOf:
            - '$ref': '#/components/schemas/WithQueryTimestampAfterMetaObject'
            - '$ref': '#/components/schemas/WithQueryTimestampBeforeMetaObject'
          type: object
      required:
        - createdAt
      type: object
    WithQueryModifiedAtTimestampMetaObject:
      properties:
        modifiedAt:
          anyOf:
            - '$ref': '#/components/schemas/WithQueryTimestampAfterMetaObject'
            - '$ref': '#/components/schemas/WithQueryTimestampBeforeMetaObject'
          type: object
      required:
        - modifiedAt
      type: object
    WithQueryNameMetaObject:
      properties:
        name:
          '$ref': '#/components/schemas/WithQueryStringBeginsWithMetaObject'
      required:
        - name
      type: object
    WithQueryOrganizationIdMetaObject:
      properties:
        organization:
          '$ref': '#/components/schemas/WithIdMetaObject'
      required:
        - organization
      type: object
    WithQueryStringBeginsWithMetaObject:
      properties:
        beginsWith:
          type: string
      required:
        - beginsWith
      type: object
    WithQueryTimestampAfterMetaObject:
      properties:
        after:
          '$ref': '#/components/schemas/Rfc3339Iso8601DateTime'
      required:
        - after
      type: object
    WithQueryTimestampBeforeMetaObject:
      properties:
        before:
          '$ref': '#/components/schemas/Rfc3339Iso8601DateTime'
      required:
        - before
      type: object
    WithTimestampsMetaObject:
      allOf:
        - '$ref': '#/components/schemas/WithCreatedAtMetaObject'
        - '$ref': '#/components/schemas/WithModifiedAtMetaObject'
